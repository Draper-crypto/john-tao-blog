---
title: Javaåˆå­¦å®è·µ-ä½¿ç”¨spring bootè¿›è¡Œç®€å•çš„ç”¨æˆ·ç®¡ç†
date: 2023-06-04 14:27:01
permalink: /code/co0001
categories: 
  - ä¿¡æ¯æŠ€æœ¯
  - ä»£ç ç¼–å†™
tags: 
  - Java
author: 
  name: John Tao
  link: https://github.com/Draper-crypto/
---

## ä¸€ã€ä»»åŠ¡è¯´æ˜

1. ä½¿ç”¨ Java ç¼–å†™ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ<!-- more -->
2. ä½¿ç”¨spring bootæ¡†æ¶
3. å¯ä»¥è¿æ¥åˆ° MySQL æ•°æ®åº“ï¼Œå¹¶æ”¯æŒä»¥ä¸‹åŠŸèƒ½:
   - å¢åŠ ç”¨æˆ·è®°å½•
   - åˆ é™¤ç”¨æˆ·è®°å½•
   - ä¿®æ”¹ç”¨æˆ·è®°å½•
   - æŸ¥è¯¢/æ˜¾ç¤ºç”¨æˆ·è®°å½•


## äºŒã€ä»£ç å®ç°

### 1.ç›®å½•æ ·å¼

![image-20230604210856586](https://typora-img-1301299232.cos.ap-shanghai.myqcloud.com/img/image-20230604210856586.png)



### 2.æºä»£ç 

- `UserController.java`

```java
package com.example.demo;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;

@Controller
public class UserController {

    private final JdbcTemplate jdbcTemplate;

    public UserController(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    @GetMapping("/")
    public String index(Model model) {
        List<Map<String, Object>> users = jdbcTemplate.queryForList("SELECT * FROM users");
        model.addAttribute("users", users);
        return "index";
    }

    @GetMapping("/create")
    public String createForm() {
        return "create";
    }

    @PostMapping("/create")
    public String create(@RequestParam String name, @RequestParam String email) {
        jdbcTemplate.update("INSERT INTO users (name, email) VALUES (?, ?)", name, email);
        return "redirect:/";
    }

    @GetMapping("/edit/{id}")
    public String editForm(@PathVariable Long id, Model model) {
        Map<String, Object> user = jdbcTemplate.queryForMap("SELECT * FROM users WHERE id = ?", id);
        model.addAttribute("user", user);
        return "edit";
    }

    @PostMapping("/edit/{id}")
    public String edit(@PathVariable Long id, @RequestParam String name, @RequestParam String email) {
        jdbcTemplate.update("UPDATE users SET name = ?, email = ? WHERE id = ?", name, email, id);
        return "redirect:/";
    }

    @GetMapping("/delete/{id}")
    public String delete(@PathVariable Long id) {
        jdbcTemplate.update("DELETE FROM users WHERE id = ?", id);
        return "redirect:/";
    }

}
```
- `index.html`

```html
<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>ç¼–è¾‘ç”¨æˆ·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        form {
            width: 50%;
            margin: 50px auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            padding: 20px;
        }

        label {
            display: inline-block;
            width: 100px;
            margin-bottom: 10px;
        }

        input[type="text"] {
            display: inline-block;
            width: calc(100% - 110px);
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }

        input[type="submit"] {
            display: block;
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;

            border-radius< !DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><title>ç”¨æˆ·ç®¡ç†</title><style>body {
                font-family: Arial, sans-serif;
                background-color: #f5f5f5;
            }

            table {
                border-collapse: collapse;
                width: 80%;
                margin: 50px auto;
                background-color: white;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            }

            th,
            td {
                text-align: left;
                padding: 8px;
            }

            th {
                background-color: #4CAF50;
                color: white;
            }

            tr:nth-child(even) {
                background-color: #f2f2f2;
            }

            tr:hover {
                background-color: #ddd;
            }

            h1 {
                text-align: center;
                margin-top: 30px;
            }

            a.button {
                display: inline-block;
                background-color: #4CAF50;
                color: white;
                padding: 10px 20px;
                text-align: center;
                text-decoration: none;
                border-radius: 5px;
                margin: 10px;
            }

            a.button:hover {
                background-color: #3e8e41;
            }
    </style>
</head>

<body>
    <h1>ç”¨æˆ·ç®¡ç†</h1>
    <table>
        <tr>
            <th>ID</th>
            <th>å§“å</th>
            <th>é‚®ç®±</th>
            <th>æ“ä½œ</th>
        </tr>
        <tr th:each="user : ${users}">
            <td th:text="${user.id}"></td>
            <td th:text="${user.name}"></td>
            <td th:text="${user.email}"></td>
            <td>
                <a class="button" th:href="@{/edit/{id}(id=${user.id})}">ç¼–è¾‘</a>
                <a class="button" th:href="@{/delete/{id}(id=${user.id})}">åˆ é™¤</a>
            </td>
        </tr>
    </table>
    <div style="text-align: center;">
        <a class="button" th:href="@{/create}">æ·»åŠ ç”¨æˆ·</a>
    </div>
</body>

</html>
: 5px;
margin-top: 20px;
}

input[type="submit"]:hover {
background-color: #3e8e41;
}

h1 {
text-align: center;
margin-top: 30px;
}
</style>
</head>

<body>
    <h1>ç¼–è¾‘ç”¨æˆ·</h1>
    <form method="post" th:action="@{/edit/{id}(id=${user.id})}">
        <input type="hidden" name="id" th:value="${user.id}">
        <label>å§“åï¼š</label>
        <input type="text" name="name" th:value="${user.name}"><br>
        <label>é‚®ç®±ï¼š</label>
        <input type="text" name="email" th:value="${user.email}"><br>
        <input type="submit" value="ä¿å­˜">
    </form>
    </form>
</body>

</html>
```

- `create.html`

```html
<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>æ·»åŠ ç”¨æˆ·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        form {
            width: 50%;
            margin: 50px auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            padding: 20px;
        }

        label {
            display: inline-block;
            width: 100px;
            margin-bottom: 10px;
        }

        input[type="text"] {
            display: inline-block;
            width: calc(100% - 110px);
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }

        input[type="submit"] {
            display: block;
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
            margin-top: 20px;
        }

        input[type="submit"]:hover {
            background-color: #3e8e41;
        }

        h1 {
            text-align: center;
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <h1>æ·»åŠ ç”¨æˆ·</h1>
    <form method="post" action="/create">
        <label>å§“åï¼š</label>
        <input type="text" name="name"><br>
        <label>é‚®ç®±ï¼š</label>
        <input type="text" name="email"><br>
        <input type="submit" value="æäº¤">
    </form>
</body>

</html>
```

- `edit.html`

```html
<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>ç¼–è¾‘ç”¨æˆ·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        form {
            width: 50%;
            margin: 50px auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            padding: 20px;
        }

        label {
            display: inline-block;
            width: 100px;
            margin-bottom: 10px;
        }

        input[type="text"] {
            display: inline-block;
            width: calc(100% - 110px);
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }

        input[type="submit"] {
            display: block;
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
            margin-top: 20px;
        }

        input[type="submit"]:hover {
            background-color: #3e8e41;
        }

        h1 {
            text-align: center;
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <h1>ç¼–è¾‘ç”¨æˆ·</h1>
    <form method="post" th:action="@{/edit/{id}(id=${user.id})}">
        <input type="hidden" name="id" th:value="${user.id}">
        <label>å§“åï¼š</label>
        <input type="text" name="name" th:value="${user.name}"><br>
        <label>é‚®ç®±ï¼š</label>
        <input type="text" name="email" th:value="${user.email}"><br>
        <input type="submit" value="ä¿å­˜">
    </form>
    </form>
</body>

</html>
```

### 3.è¿è¡Œæˆªå›¾

ï¼ˆ1ï¼‰å¢åŠ å­¦ç”Ÿè®°å½•

![image-20230604211516344](https://typora-img-1301299232.cos.ap-shanghai.myqcloud.com/img/image-20230604211516344.png)

![image-20230604211528634](https://typora-img-1301299232.cos.ap-shanghai.myqcloud.com/img/image-20230604211528634.png)

ï¼ˆ2ï¼‰ç¼–è¾‘ç”¨æˆ·

![image-20230604211606601](https://typora-img-1301299232.cos.ap-shanghai.myqcloud.com/img/image-20230604211606601.png)

![image-20230604211614390](https://typora-img-1301299232.cos.ap-shanghai.myqcloud.com/img/image-20230604211614390.png)

ï¼ˆ3ï¼‰åˆ é™¤ç”¨æˆ·

![image-20230604211614390](https://typora-img-1301299232.cos.ap-shanghai.myqcloud.com/img/image-20230604211614390.png)

![image-20230604211649384](https://typora-img-1301299232.cos.ap-shanghai.myqcloud.com/img/image-20230604211649384.png)

ï¼ˆ4ï¼‰æ˜¾ç¤ºåº“ä¸­æ‰€æœ‰ç”¨æˆ·

![image-20230604211728875](https://typora-img-1301299232.cos.ap-shanghai.myqcloud.com/img/image-20230604211728875.png)


## ä¸‰ã€ä»£ç è§£é‡Š

### 1.ç¬¬ä¸€éƒ¨åˆ†

```java
package com.example.demo;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;

```

&emsp;&emsp;è¿™æ˜¯ä¸€ä¸ª Java ç±»ï¼Œç”¨äºå£°æ˜åŒ…å’Œå¯¼å…¥æ‰€éœ€çš„ç±»ã€‚åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å¯¼å…¥äº† Spring æ¡†æ¶ä¸­çš„ä¸€äº›ç±»ï¼Œä¾‹å¦‚ `JdbcTemplate`ã€`Controller`ã€`Model`ã€`RequestMapping` ç­‰ã€‚

### 2.ç¬¬äºŒéƒ¨åˆ†

```java
@Controller
public class UserController {
```

&emsp;&emsp;è¿™ä¸ªç±»è¢«æ ‡è®°ä¸º `@Controller`ï¼Œè¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªå¤„ç† HTTP è¯·æ±‚çš„æ§åˆ¶å™¨ã€‚

### 3.ç¬¬ä¸‰éƒ¨åˆ†

```java
   private final JdbcTemplate jdbcTemplate;

    public UserController(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }
```

&emsp;&emsp;è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ª `JdbcTemplate` ç±»å‹çš„ç§æœ‰å˜é‡ `jdbcTemplate`ï¼Œå®ƒçš„å€¼åœ¨æ„é€ å‡½æ•°ä¸­è¢«æ³¨å…¥ã€‚`JdbcTemplate` æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªç®€å•çš„ `JDBC `å°è£…ç±»ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿åœ°æ‰§è¡Œ SQL æŸ¥è¯¢å’Œæ›´æ–°æ“ä½œã€‚

### 4.ç¬¬å››éƒ¨åˆ†

```java
  @GetMapping("/")
    public String index(Model model) {
        List<Map<String, Object>> users = jdbcTemplate.queryForList("SELECT * FROM users");
        model.addAttribute("users", users);
        return "index";
    }
```

&emsp;&emsp;è¿™æ˜¯ä¸€ä¸ª HTTP GET è¯·æ±‚å¤„ç†æ–¹æ³•ï¼Œå®ƒå¤„ç†æ ¹è·¯å¾„çš„è¯·æ±‚ï¼ˆ`/`ï¼‰ã€‚å®ƒä½¿ç”¨ `jdbcTemplate` æ‰§è¡Œäº†ä¸€ä¸ª SQL æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœæ·»åŠ åˆ° `Model` å¯¹è±¡ä¸­ã€‚æœ€åï¼Œå®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² `"index"`ï¼Œè¡¨ç¤ºè¦æ¸²æŸ“åä¸º `index.html` çš„æ¨¡æ¿ã€‚

### 5.ç¬¬äº”éƒ¨åˆ†

```java
   @GetMapping("/create")
    public String createForm() {
        return "create";
    }

    @PostMapping("/create")
    public String create(@RequestParam String name, @RequestParam String email) {
        jdbcTemplate.update("INSERT INTO users (name, email) VALUES (?, ?)", name, email);
        return "redirect:/";
    }
```

&emsp;&emsp;è¿™æ˜¯ HTTP GET å’Œ POST è¯·æ±‚å¤„ç†æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºæ–°ç”¨æˆ·ã€‚`/create` è·¯å¾„çš„ GET è¯·æ±‚å¤„ç†æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² `"create"`ï¼Œè¡¨ç¤ºè¦æ¸²æŸ“åä¸º `create.html` çš„æ¨¡æ¿ã€‚`/create` è·¯å¾„çš„ POST è¯·æ±‚å¤„ç†æ–¹æ³•è·å–æäº¤çš„è¡¨å•æ•°æ®ï¼Œå¹¶ä½¿ç”¨ `jdbcTemplate` æ‰§è¡Œ SQL æ’å…¥æ“ä½œï¼Œå°†æ–°ç”¨æˆ·çš„ä¿¡æ¯æ’å…¥åˆ°æ•°æ®åº“ä¸­ã€‚æœ€åï¼Œå®ƒè¿”å›ä¸€ä¸ªé‡å®šå‘åˆ°æ ¹è·¯å¾„çš„å­—ç¬¦ä¸² `"redirect:/"`ã€‚

### 6.ç¬¬å…­éƒ¨åˆ†

```java
  @GetMapping("/edit/{id}")
    public String editForm(@PathVariable Long id, Model model) {
        Map<String, Object> user = jdbcTemplate.queryForMap("SELECT * FROM users WHERE id = ?", id);
        model.addAttribute("user", user);
        return "edit";
    }

    @PostMapping("/edit/{id}")
    public String edit(@PathVariable Long id, @RequestParam String name, @RequestParam String email) {
        jdbcTemplate.update("UPDATE users SET name = ?, email = ? WHERE id = ?", name, email, id);
        return "redirect:/";
    }
```

&emsp;&emsp;è¿™æ˜¯ HTTP GET å’Œ POST è¯·æ±‚å¤„ç†æ–¹æ³•ï¼Œç”¨äºç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ã€‚`/edit/{id}` è·¯å¾„çš„ GET è¯·æ±‚å¤„ç†æ–¹æ³•è·å–æŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ° `Model`å¯¹è±¡ä¸­ï¼Œç„¶åè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²`"edit"`ï¼Œè¡¨ç¤ºè¦æ¸²æŸ“åä¸º`edit.html`çš„æ¨¡æ¿ã€‚`/edit/{id}`è·¯å¾„çš„ POST è¯·æ±‚å¤„ç†æ–¹æ³•è·å–è¡¨å•æ•°æ®ï¼Œå¹¶ä½¿ç”¨`jdbcTemplate`æ‰§è¡Œ SQL æ›´æ–°æ“ä½œï¼Œå°†æŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯æ›´æ–°åˆ°æ•°æ®åº“ä¸­ã€‚æœ€åï¼Œå®ƒè¿”å›ä¸€ä¸ªé‡å®šå‘åˆ°æ ¹è·¯å¾„çš„å­—ç¬¦ä¸²`"redirect:/"`ã€‚

### 7.ç¬¬ä¸ƒéƒ¨åˆ†

```java
   @GetMapping("/delete/{id}")
    public String delete(@PathVariable Long id) {
        jdbcTemplate.update("DELETE FROM users WHERE id = ?", id);
        return "redirect:/";
    }
```

&emsp;&emsp;è¿™æ˜¯ä¸€ä¸ª HTTP GET è¯·æ±‚å¤„ç†æ–¹æ³•ï¼Œç”¨äºåˆ é™¤ç”¨æˆ·ä¿¡æ¯ã€‚`/delete/{id}` è·¯å¾„çš„ GET è¯·æ±‚å¤„ç†æ–¹æ³•æ‰§è¡Œä¸€ä¸ª SQL åˆ é™¤æ“ä½œï¼Œå°†æŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯ä»æ•°æ®åº“ä¸­åˆ é™¤ã€‚æœ€åï¼Œå®ƒè¿”å›ä¸€ä¸ªé‡å®šå‘åˆ°æ ¹è·¯å¾„çš„å­—ç¬¦ä¸² `"redirect:/"`ã€‚


## å››ã€æ€»ç»“

&emsp;&emsp;è¿™ä¸ªæ§åˆ¶å™¨ç±»å¤„ç† HTTP è¯·æ±‚å’Œæ•°æ®åº“æ“ä½œï¼ŒåŒ…æ‹¬æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤ç”¨æˆ·ä¿¡æ¯ã€‚ä½¿ç”¨ Spring æ¡†æ¶æä¾›çš„ `JdbcTemplate` ç±»æ¥æ‰§è¡Œ SQL æ“ä½œï¼Œå¹¶ä½¿ç”¨ `Model` å¯¹è±¡æ¥ä¼ é€’æ•°æ®åˆ°æ¨¡æ¿ä¸­ã€‚

&emsp;&emsp;è™½ç„¶å®ç°äº†åŸºæœ¬åŠŸèƒ½ï¼Œä½†æ˜¯ä»£ç ä¸­è¿˜å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ²¡æœ‰å¯¹è¾“å…¥æ•°æ®æ²¡æœ‰åšé™åˆ¶ï¼Œæ²¡æœ‰æœç´¢ç”¨æˆ·çš„åŠŸèƒ½ç­‰ï¼Œè¿˜æœ‰å¾…å®Œå–„å’Œæé«˜ã€‚



## å›½å†…å¹³å°åˆ›ä½œé“¾æ¥

ğŸ‘‰çŸ¥ä¹ï¼š[ç‚¹å‡»è½¬è·³](https://zhuanlan.zhihu.com/p/634621304)

ğŸ‘‰CSDNï¼š[ç‚¹å‡»è½¬è·³](http://t.csdn.cn/aOssE)

